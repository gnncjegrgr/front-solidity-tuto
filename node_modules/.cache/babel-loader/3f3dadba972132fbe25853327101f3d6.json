{"ast":null,"code":"'use strict';\n\nconst sort = require('stable');\n\nconst {\n  serialize\n} = require('../util.js');\n\nconst dagNodeUtil = require('./util.js');\n\nconst linkSort = dagNodeUtil.linkSort;\n\nconst DAGNode = require('./index.js');\n\nconst DAGLink = require('../dag-link');\n\nconst create = function (data) {\n  let links = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (typeof data === 'string') {\n    data = Buffer.from(data);\n  }\n\n  if (!Buffer.isBuffer(data)) {\n    throw new Error('Passed \\'data\\' is not a buffer or a string!');\n  }\n\n  links = links.map(link => {\n    return DAGLink.isDAGLink(link) ? link : DAGLink.util.createDagLinkFromB58EncodedHash(link);\n  });\n  links = sort(links, linkSort);\n  const serialized = serialize({\n    Data: data,\n    Links: links\n  });\n  return new DAGNode(data, links, serialized.length);\n};\n\nmodule.exports = create;","map":{"version":3,"sources":["C:/Users/kimyo/skkrypto project/skkrypto-front-solidity/node_modules/ipld-dag-pb/src/dag-node/create.js"],"names":["sort","require","serialize","dagNodeUtil","linkSort","DAGNode","DAGLink","create","data","links","Buffer","from","isBuffer","Error","map","link","isDAGLink","util","createDagLinkFromB58EncodedHash","serialized","Data","Links","length","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,QAAD,CAApB;;AACA,MAAM;AACJC,EAAAA;AADI,IAEFD,OAAO,CAAC,YAAD,CAFX;;AAGA,MAAME,WAAW,GAAGF,OAAO,CAAC,WAAD,CAA3B;;AACA,MAAMG,QAAQ,GAAGD,WAAW,CAACC,QAA7B;;AACA,MAAMC,OAAO,GAAGJ,OAAO,CAAC,YAAD,CAAvB;;AACA,MAAMK,OAAO,GAAGL,OAAO,CAAC,aAAD,CAAvB;;AAEA,MAAMM,MAAM,GAAG,UAACC,IAAD,EAAsB;AAAA,MAAfC,KAAe,uEAAP,EAAO;;AACnC,MAAI,OAAOD,IAAP,KAAgB,QAApB,EAA8B;AAC5BA,IAAAA,IAAI,GAAGE,MAAM,CAACC,IAAP,CAAYH,IAAZ,CAAP;AACD;;AAED,MAAI,CAACE,MAAM,CAACE,QAAP,CAAgBJ,IAAhB,CAAL,EAA4B;AAC1B,UAAM,IAAIK,KAAJ,CAAU,8CAAV,CAAN;AACD;;AACDJ,EAAAA,KAAK,GAAGA,KAAK,CAACK,GAAN,CAAWC,IAAD,IAAU;AAC1B,WAAOT,OAAO,CAACU,SAAR,CAAkBD,IAAlB,IAA0BA,IAA1B,GAAiCT,OAAO,CAACW,IAAR,CAAaC,+BAAb,CAA6CH,IAA7C,CAAxC;AACD,GAFO,CAAR;AAGAN,EAAAA,KAAK,GAAGT,IAAI,CAACS,KAAD,EAAQL,QAAR,CAAZ;AAEA,QAAMe,UAAU,GAAGjB,SAAS,CAAC;AAC3BkB,IAAAA,IAAI,EAAEZ,IADqB;AAE3Ba,IAAAA,KAAK,EAAEZ;AAFoB,GAAD,CAA5B;AAKA,SAAO,IAAIJ,OAAJ,CAAYG,IAAZ,EAAkBC,KAAlB,EAAyBU,UAAU,CAACG,MAApC,CAAP;AACD,CAnBD;;AAqBAC,MAAM,CAACC,OAAP,GAAiBjB,MAAjB","sourcesContent":["'use strict'\r\n\r\nconst sort = require('stable')\r\nconst {\r\n  serialize\r\n} = require('../util.js')\r\nconst dagNodeUtil = require('./util.js')\r\nconst linkSort = dagNodeUtil.linkSort\r\nconst DAGNode = require('./index.js')\r\nconst DAGLink = require('../dag-link')\r\n\r\nconst create = (data, links = []) => {\r\n  if (typeof data === 'string') {\r\n    data = Buffer.from(data)\r\n  }\r\n\r\n  if (!Buffer.isBuffer(data)) {\r\n    throw new Error('Passed \\'data\\' is not a buffer or a string!')\r\n  }\r\n  links = links.map((link) => {\r\n    return DAGLink.isDAGLink(link) ? link : DAGLink.util.createDagLinkFromB58EncodedHash(link)\r\n  })\r\n  links = sort(links, linkSort)\r\n\r\n  const serialized = serialize({\r\n    Data: data,\r\n    Links: links\r\n  })\r\n\r\n  return new DAGNode(data, links, serialized.length)\r\n}\r\n\r\nmodule.exports = create\r\n"]},"metadata":{},"sourceType":"script"}