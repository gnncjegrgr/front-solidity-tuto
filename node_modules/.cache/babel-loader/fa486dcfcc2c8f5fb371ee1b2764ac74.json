{"ast":null,"code":"'use strict';\n\nconst promisify = require('promisify-es6');\n\nconst CID = require('cids');\n\nconst {\n  DAGNode\n} = require('ipld-dag-pb');\n\nconst SendOneFile = require('../utils/send-one-file');\n\nconst once = require('once');\n\nmodule.exports = send => {\n  const sendOneFile = SendOneFile(send, 'object/put');\n  return promisify((obj, options, _callback) => {\n    if (typeof options === 'function') {\n      _callback = options;\n      options = {};\n    }\n\n    const callback = once(_callback);\n\n    if (!options) {\n      options = {};\n    }\n\n    let tmpObj = {\n      Data: null,\n      Links: []\n    };\n\n    if (Buffer.isBuffer(obj)) {\n      if (!options.enc) {\n        tmpObj = {\n          Data: obj.toString(),\n          Links: []\n        };\n      }\n    } else if (DAGNode.isDAGNode(obj)) {\n      tmpObj = {\n        Data: obj.Data.toString(),\n        Links: obj.Links.map(l => ({\n          Name: l.Name,\n          Hash: l.Hash.toString(),\n          Size: l.Tsize\n        }))\n      };\n    } else if (typeof obj === 'object') {\n      tmpObj.Data = obj.Data.toString();\n      tmpObj.Links = obj.Links;\n    } else {\n      return callback(new Error('obj not recognized'));\n    }\n\n    let buf;\n\n    if (Buffer.isBuffer(obj) && options.enc) {\n      buf = obj;\n    } else {\n      buf = Buffer.from(JSON.stringify(tmpObj));\n    }\n\n    const enc = options.enc || 'json';\n    const sendOptions = {\n      qs: {\n        inputenc: enc\n      }\n    };\n    sendOneFile(buf, sendOptions, (err, result) => {\n      if (err) {\n        return callback(err); // early\n      }\n\n      callback(null, new CID(result.Hash));\n    });\n  });\n};","map":{"version":3,"sources":["C:/Users/kimyo/skkrypto project/skkrypto-front-solidity/node_modules/ipfs-http-client/src/object/put.js"],"names":["promisify","require","CID","DAGNode","SendOneFile","once","module","exports","send","sendOneFile","obj","options","_callback","callback","tmpObj","Data","Links","Buffer","isBuffer","enc","toString","isDAGNode","map","l","Name","Hash","Size","Tsize","Error","buf","from","JSON","stringify","sendOptions","qs","inputenc","err","result"],"mappings":"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","sourcesContent":["'use strict'\r\n\r\nconst promisify = require('promisify-es6')\r\nconst CID = require('cids')\r\nconst { DAGNode } = require('ipld-dag-pb')\r\n\r\nconst SendOneFile = require('../utils/send-one-file')\r\nconst once = require('once')\r\n\r\nmodule.exports = (send) => {\r\n  const sendOneFile = SendOneFile(send, 'object/put')\r\n\r\n  return promisify((obj, options, _callback) => {\r\n    if (typeof options === 'function') {\r\n      _callback = options\r\n      options = {}\r\n    }\r\n\r\n    const callback = once(_callback)\r\n\r\n    if (!options) {\r\n      options = {}\r\n    }\r\n\r\n    let tmpObj = {\r\n      Data: null,\r\n      Links: []\r\n    }\r\n\r\n    if (Buffer.isBuffer(obj)) {\r\n      if (!options.enc) {\r\n        tmpObj = {\r\n          Data: obj.toString(),\r\n          Links: []\r\n        }\r\n      }\r\n    } else if (DAGNode.isDAGNode(obj)) {\r\n      tmpObj = {\r\n        Data: obj.Data.toString(),\r\n        Links: obj.Links.map(l => ({\r\n          Name: l.Name,\r\n          Hash: l.Hash.toString(),\r\n          Size: l.Tsize\r\n        }))\r\n      }\r\n    } else if (typeof obj === 'object') {\r\n      tmpObj.Data = obj.Data.toString()\r\n      tmpObj.Links = obj.Links\r\n    } else {\r\n      return callback(new Error('obj not recognized'))\r\n    }\r\n\r\n    let buf\r\n    if (Buffer.isBuffer(obj) && options.enc) {\r\n      buf = obj\r\n    } else {\r\n      buf = Buffer.from(JSON.stringify(tmpObj))\r\n    }\r\n    const enc = options.enc || 'json'\r\n\r\n    const sendOptions = {\r\n      qs: { inputenc: enc }\r\n    }\r\n\r\n    sendOneFile(buf, sendOptions, (err, result) => {\r\n      if (err) {\r\n        return callback(err) // early\r\n      }\r\n\r\n      callback(null, new CID(result.Hash))\r\n    })\r\n  })\r\n}\r\n"]},"metadata":{},"sourceType":"script"}