{"ast":null,"code":"'use strict';\n\nconst nodeify = require('../nodeify');\n\nconst crypto = require('../webcrypto');\n\nconst lengths = require('./lengths');\n\nconst hashTypes = {\n  SHA1: 'SHA-1',\n  SHA256: 'SHA-256',\n  SHA512: 'SHA-512'\n};\n\nconst sign = (key, data, cb) => {\n  nodeify(crypto.subtle.sign({\n    name: 'HMAC'\n  }, key, data).then(raw => Buffer.from(raw)), cb);\n};\n\nexports.create = function (hashType, secret, callback) {\n  const hash = hashTypes[hashType];\n  nodeify(crypto.subtle.importKey('raw', secret, {\n    name: 'HMAC',\n    hash: {\n      name: hash\n    }\n  }, false, ['sign']).then(key => {\n    return {\n      digest(data, cb) {\n        sign(key, data, cb);\n      },\n\n      length: lengths[hashType]\n    };\n  }), callback);\n};","map":{"version":3,"sources":["C:/Users/kimyo/skkrypto project/skkrypto-front-solidity/node_modules/libp2p-crypto/src/hmac/index-browser.js"],"names":["nodeify","require","crypto","lengths","hashTypes","SHA1","SHA256","SHA512","sign","key","data","cb","subtle","name","then","raw","Buffer","from","exports","create","hashType","secret","callback","hash","importKey","digest","length"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,YAAD,CAAvB;;AAEA,MAAMC,MAAM,GAAGD,OAAO,CAAC,cAAD,CAAtB;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,WAAD,CAAvB;;AAEA,MAAMG,SAAS,GAAG;AAChBC,EAAAA,IAAI,EAAE,OADU;AAEhBC,EAAAA,MAAM,EAAE,SAFQ;AAGhBC,EAAAA,MAAM,EAAE;AAHQ,CAAlB;;AAMA,MAAMC,IAAI,GAAG,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAC9BX,EAAAA,OAAO,CAACE,MAAM,CAACU,MAAP,CAAcJ,IAAd,CAAmB;AAAEK,IAAAA,IAAI,EAAE;AAAR,GAAnB,EAAqCJ,GAArC,EAA0CC,IAA1C,EACLI,IADK,CACCC,GAAD,IAASC,MAAM,CAACC,IAAP,CAAYF,GAAZ,CADT,CAAD,EAC6BJ,EAD7B,CAAP;AAED,CAHD;;AAKAO,OAAO,CAACC,MAAR,GAAiB,UAAUC,QAAV,EAAoBC,MAApB,EAA4BC,QAA5B,EAAsC;AACrD,QAAMC,IAAI,GAAGnB,SAAS,CAACgB,QAAD,CAAtB;AAEApB,EAAAA,OAAO,CAACE,MAAM,CAACU,MAAP,CAAcY,SAAd,CACN,KADM,EAENH,MAFM,EAGN;AACER,IAAAA,IAAI,EAAE,MADR;AAEEU,IAAAA,IAAI,EAAE;AAAEV,MAAAA,IAAI,EAAEU;AAAR;AAFR,GAHM,EAON,KAPM,EAQN,CAAC,MAAD,CARM,EASNT,IATM,CASAL,GAAD,IAAS;AACd,WAAO;AACLgB,MAAAA,MAAM,CAAEf,IAAF,EAAQC,EAAR,EAAY;AAChBH,QAAAA,IAAI,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,CAAJ;AACD,OAHI;;AAILe,MAAAA,MAAM,EAAEvB,OAAO,CAACiB,QAAD;AAJV,KAAP;AAMD,GAhBO,CAAD,EAgBHE,QAhBG,CAAP;AAiBD,CApBD","sourcesContent":["'use strict'\r\n\r\nconst nodeify = require('../nodeify')\r\n\r\nconst crypto = require('../webcrypto')\r\nconst lengths = require('./lengths')\r\n\r\nconst hashTypes = {\r\n  SHA1: 'SHA-1',\r\n  SHA256: 'SHA-256',\r\n  SHA512: 'SHA-512'\r\n}\r\n\r\nconst sign = (key, data, cb) => {\r\n  nodeify(crypto.subtle.sign({ name: 'HMAC' }, key, data)\r\n    .then((raw) => Buffer.from(raw)), cb)\r\n}\r\n\r\nexports.create = function (hashType, secret, callback) {\r\n  const hash = hashTypes[hashType]\r\n\r\n  nodeify(crypto.subtle.importKey(\r\n    'raw',\r\n    secret,\r\n    {\r\n      name: 'HMAC',\r\n      hash: { name: hash }\r\n    },\r\n    false,\r\n    ['sign']\r\n  ).then((key) => {\r\n    return {\r\n      digest (data, cb) {\r\n        sign(key, data, cb)\r\n      },\r\n      length: lengths[hashType]\r\n    }\r\n  }), callback)\r\n}\r\n"]},"metadata":{},"sourceType":"script"}